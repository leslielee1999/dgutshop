{"version":3,"sources":["uni-app:///main.js",null,"webpack:///D:/WeChatProjects/CoffeeShop/CoffeeShop/pages/orderPreview/orderPreview.vue?5a86","webpack:///D:/WeChatProjects/CoffeeShop/CoffeeShop/pages/orderPreview/orderPreview.vue?7bf1","webpack:///D:/WeChatProjects/CoffeeShop/CoffeeShop/pages/orderPreview/orderPreview.vue?ce2e","uni-app:///pages/orderPreview/orderPreview.vue","webpack:///D:/WeChatProjects/CoffeeShop/CoffeeShop/pages/orderPreview/orderPreview.vue?9415","webpack:///D:/WeChatProjects/CoffeeShop/CoffeeShop/pages/orderPreview/orderPreview.vue?dd22"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,iH;AACAA,UAAU,CAACC,qBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyH;AACzH;AACgE;AACL;AACc;;;AAGzE;AACsK;AACtK,gBAAgB,6KAAU;AAC1B,EAAE,kFAAM;AACR,EAAE,uFAAM;AACR,EAAE,gGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,2FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,WAAW,oPAEN;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACdA;AAAA;AAAA;AAAA;AAAwnB,CAAgB,snBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACuG5oB,wF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eACA,EACA,IADA,kBACA,CACA,SACA,SADA,EAEA,YAFA,EAGA,eAHA,EAIA,sBAJA,EAKA,WALA,GAOA,CATA,EAUA,WACA,iBADA,+BACA,CACA;AACA,qDACA,sBACA,0BACA,+BACA,iCACA,8BACA,6BACA,0EACA,CAPA,MAOA,CACA,qCACA,oEACA,2DACA,0EAEA,CACA,CAlBA,EAmBA,uBAnBA,qCAmBA,CACA,4BACA,0BACA,8BACA,2DACA,0EACA,CAEA,4DACA,2EACA,sBACA,wBACA,CA/BA,EAgCA,aAhCA,2BAgCA,CACA;AACA,qDACA,iBACA,qCADA,IAGA,CAtCA,EAuCA,iBAvCA,6BAuCA,OAvCA,EAuCA,CACA,sBACA,+CACA,4BACA,CAHA,MAGA,CACA,uBACA,wCACA,8CACA,kDACA,4CACA,CAEA,CAnDA,EAoDA,MApDA,oBAoDA,CACA,6DACA,gBACA,YADA,EAEA,cAFA,IAIA,OACA,CACA,gBACA,wCACA,oBACA,0BACA,+BACA,OACA,CACA,CACA,6BACA,wBACA,cACA,0CADA,EAEA,cAFA,EAGA,gBAHA,EAIA,UACA,sBADA,EAJA,EAOA,sCACA,kCACA,uBACA,gBACA,iBADA,EAEA,YAFA,IAIA,OACA,CAEA,gBACA,aADA,EAEA,mBAFA,EAGA,gCACA,kBACA,cACA,yCADA;AAEA,gCAFA;AAGA;AACA,0CADA,EAHA;;AAMA;AACA,wDADA,EANA;;AASA;AACA;AACA,mBAXA;;;AAcA,eAfA,MAeA;;AAEA;;AAEA;AACA;AACA,2CADA;;AAGA,eAJA;AAKA,kBALA;;AAOA,aA9BA;;;;AAkCA,SAnDA;AAoDA,YApDA,gBAoDA,CApDA,EAoDA;AACA;AACA;AACA,6BADA;;AAGA,SAzDA;;AA2DA,KAjIA;AAkIA;AACA;AACA,KApIA;AAqIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBADA,EACA,CADA;AAEA;AACA;AACA,uBAbA,CAaA;AACA;AACA;;AAEA,KAtJA;AAuJA,oBAvJA,4BAuJA,OAvJA,EAuJA;AACA;AACA;AACA,sCADA;AAEA,KA3JA;AA4JA,qBA5JA,+BA4JA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA,oDADA;AAEA,uBAFA;AAGA;AACA,kCADA,EAHA;;AAMA;AACA;AACA;AACA,mCADA;AAEA;AACA,WAXA;;AAaA;;AAEA,KAhLA,EAVA;;AA4LA,QA5LA,oBA4LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAHA,MAGA;AACA;AACA;AACA,kDADA;AAEA,qBAFA;AAGA;AACA,gCADA,EAHA;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAbA;;AAeA;;;AAGA;AACA;AACA;AACA,GA3NA;AA4NA;AACA;AACA,eAFA,yBAEA;AACA;AACA;AACA;AACA;AACA;AACA,KARA;AASA,sBATA,gCASA;AACA;AACA,KAXA;AAYA,kBAZA,4BAYA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KAlBA;AAmBA,mBAnBA,6BAmBA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;;AAEA;;AAEA,KA5BA,EA5NA,E;;;;;;;;;;;;;ACxGA;AAAA;AAAA;AAAA;AAAyoC,CAAgB,gkCAAG,EAAC,C;;;;;;;;;;;ACA7pC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/orderPreview/orderPreview.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/orderPreview/orderPreview.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./orderPreview.vue?vue&type=template&id=5e6e3b74&\"\nvar renderjs\nimport script from \"./orderPreview.vue?vue&type=script&lang=js&\"\nexport * from \"./orderPreview.vue?vue&type=script&lang=js&\"\nimport style0 from \"./orderPreview.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/orderPreview/orderPreview.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./orderPreview.vue?vue&type=template&id=5e6e3b74&\"","var components = {\n  uniIcons: function() {\n    return import(\n      /* webpackChunkName: \"components/uni-icons/uni-icons\" */ \"@/components/uni-icons/uni-icons.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./orderPreview.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./orderPreview.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\r\n\t\t<view class=\"header\">\r\n\t\t\t<view class=\"orderType\">\r\n\t\t\t\t<view v-if=\"order.type\" class=\"addressControl\" @click=\"changeAddress\">\r\n\t\t\t\t\t<view class=\"addressText\">\r\n\t\t\t\t\t\t{{shopInfo.dgutshop_shop_name}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- <uni-icons class=\"icon\" style=\"border-radius: 100%;\" type=\"arrowright\" color=\"#7c7c7c\"></uni-icons> -->\r\n\t\t\t\t\t<!-- 有分店的话可以更改店铺 -->\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view v-if=\"!order.type\" class=\"addressControl\" @click=\"changeAddress\">\r\n\t\t\t\t\t<view class=\"addressText\">\r\n\t\t\t\t\t\t{{getAddressText}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<uni-icons class=\"icon\" style=\"border-radius: 100%;\" type=\"arrowright\" color=\"#7c7c7c\"></uni-icons>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"select\">\r\n\t\t\t\t\t<view :class=\"[order.type == 1 ? 'on' : 'off']\" @click=\"changePeisongType\">自取</view>\r\n\t\t\t\t\t<view :class=\"[order.type == 0 ? 'on' : 'off']\" @click=\"changePeisongType\">外卖</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"nameAndPhone\">\r\n\t\t\t\t{{getNameAndPhone}}\r\n\t\t\t</view>\r\n\r\n\t\t</view>\r\n\r\n\r\n\t\t<view class=\"orderDetail\">\r\n\t\t\t<view class=\"itemList\" v-for=\"(item,index) in order.orderItemList\" :key='index'>\r\n\t\t\t\t<view class=\"item\">\r\n\t\t\t\t\t<image :src=\"item.product.picture\" mode=\"aspectFit\"></image>\r\n\t\t\t\t\t<view class=\"message\">\r\n\t\t\t\t\t\t<view class=\"name\">\r\n\t\t\t\t\t\t\t{{item.product.name}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"describe\">\r\n\t\t\t\t\t\t\t{{item.note}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"priceAndNum\">\r\n\t\t\t\t\t\t<view class=\"price\">\r\n\t\t\t\t\t\t\t￥ {{item.productActualPrice}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"num\">\r\n\t\t\t\t\t\t\tx {{item.sum}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"delivery\" v-if=\"order.type=='0'\">\r\n\t\t\t\t<view class=\"text\">\r\n\t\t\t\t\t配送费\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"deliveryPrice\">\r\n\t\t\t\t\t￥{{orderConfig.dgutshop_order_delivery}}\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"mark\">\r\n\t\t\t\t<view class=\"text\">\r\n\t\t\t\t\t备注\r\n\t\t\t\t</view>\r\n\t\t\t\t<input class=\"input\" placeholder=\"可输入口味包装等要求\" placeholder-class=\"input-holder\" v-model=\"order.message\" />\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"totalText\">\r\n\t\t\t\t共计{{getAllCount}}件商品，小计\r\n\t\t\t\t<view class=\"total-price\">\r\n\t\t\t\t\t￥{{getOrderTotalPrice}}\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t</view>\r\n\r\n\r\n\t\t<view class=\"bottom\">\r\n\t\t\t<view class=\"total-price\">\r\n\t\t\t\t合计\r\n\t\t\t\t<view class=\"price\">￥{{getOrderTotalPrice}}</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"BtnRight\">\r\n\t\t\t\t<!-- TODO:结算订单函数 -->\r\n\t\t\t\t<view @click=\"settle\" class=\"text\">\r\n\t\t\t\t\t支付\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport common from \"../../common/util.js\"\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\torder: {},\r\n\t\t\t\tshopInfo: {},\r\n\t\t\t\torderConfig: {},\r\n\t\t\t\tisSelectAddress: false,\r\n\t\t\t\taddress: {}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tchangePeisongType() {\r\n\t\t\t\t//修改订单派送类型\r\n\t\t\t\tthis.order.type = this.order.type == 0 ? 1 : 0;\r\n\t\t\t\tif (this.order.type) {\r\n\t\t\t\t\tthis.order.consignee = ''\r\n\t\t\t\t\tthis.order.consigneePhone = ''\r\n\t\t\t\t\tthis.order.consigneeAddress = ''\r\n\t\t\t\t\tthis.order.consigneeRoom = ''\r\n\t\t\t\t\tthis.order.deliveryPrice = 0\r\n\t\t\t\t\tthis.order.orderPrice -= Number(this.orderConfig.dgutshop_order_delivery)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.addAddressInOrder(this.address)\r\n\t\t\t\t\tthis.order.deliveryPrice = this.orderConfig.dgutshop_order_delivery\r\n\t\t\t\t\tconsole.log('changePeisongType', this.order.deliveryPrice)\r\n\t\t\t\t\tthis.order.orderPrice += Number(this.orderConfig.dgutshop_order_delivery)\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcomputedOrderTotalPrice() {\r\n\t\t\t\tthis.order.productPrice = 0\r\n\t\t\t\tthis.order.orderPrice = 0\r\n\t\t\t\tlet list = this.orderItemList\r\n\t\t\t\tfor (let i = 0; i < this.order.orderItemList.length; i++) {\r\n\t\t\t\t\tthis.order.productPrice += this.order.orderItemList[i].productActualPrice\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.order.deliveryPrice = Number(this.order.deliveryPrice)\r\n\t\t\t\tthis.order.orderPrice = this.order.productPrice + this.order.deliveryPrice\r\n\t\t\t\tconsole.log('计算订单总价')\r\n\t\t\t\tconsole.log(this.order)\r\n\t\t\t},\r\n\t\t\tchangeAddress() {\r\n\t\t\t\t//跳转到选择地址\r\n\t\t\t\tuni.setStorageSync('settle_order', this.order)\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '../selectAddress/selectAddress'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\taddAddressInOrder(address) {\r\n\t\t\t\tif (address == null) {\r\n\t\t\t\t\taddress = uni.getStorageSync('defaultAddress')\r\n\t\t\t\t\tif (address == null) return\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.address = address\r\n\t\t\t\t\tthis.order.consignee = address.userName\r\n\t\t\t\t\tthis.order.consigneePhone = address.userPhone\r\n\t\t\t\t\tthis.order.consigneeAddress = address.userAddress\r\n\t\t\t\t\tthis.order.consigneeRoom = address.userRoom\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tsettle() {\r\n\t\t\t\tif (this.order.type == '0' && !this.order.consigneeAddress) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: \"none\",\r\n\t\t\t\t\t\ttitle: \"请选择地址\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tlet that = this\r\n\t\t\t\tlet token = uni.getStorageSync(\"token\")\r\n\t\t\t\tif (token == null) {\r\n\t\t\t\t\tconsole.log(\"token null\")\r\n\t\t\t\t\tif (!common.doLogin()) {\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(\"token:\", token)\r\n\t\t\t\tconsole.log(this.order)\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: this.$apiUrl + '/wechat/order/submit',\r\n\t\t\t\t\tmethod: \"POST\",\r\n\t\t\t\t\tdata: this.order,\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\"Authorization\": token\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: function(submutRes) {\r\n\t\t\t\t\t\tif (submutRes.statusCode != 200) {\r\n\t\t\t\t\t\t\tconsole.log(submutRes)\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '下单失败，请重试',\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle: '模拟支付',\r\n\t\t\t\t\t\t\tcontent: '点击确认模拟支付',\r\n\t\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\t\t\t\t\turl: that.$apiUrl + '/wechat/order/h5pay',\r\n\t\t\t\t\t\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t\t\t\t\t\"Authorization\": token\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\t\t\torderId: submutRes.data.data.orderId\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\tsuccess: (payRes) => {\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(payRes, 'payRes')\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t} else if (res.cancel) {\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\t\t\tuni.switchTab({\r\n\t\t\t\t\t\t\t\t\t\t\turl: '/pages/order/order'\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t1000\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(e) {\r\n\t\t\t\t\t\tconsole.log(e)\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '下单失败，请重试',\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tRad: function(d) { //根据经纬度判断距离\r\n\t\t\t\treturn d * Math.PI / 180.0;\r\n\t\t\t},\r\n\t\t\tgetDistance: function(lat1, lng1, lat2, lng2) {\r\n\t\t\t\t// lat1用户的纬度\r\n\t\t\t\t// lng1用户的经度\r\n\t\t\t\t// lat2商家的纬度\r\n\t\t\t\t// lng2商家的经度\r\n\t\t\t\tvar radLat1 = this.Rad(lat1);\r\n\t\t\t\tvar radLat2 = this.Rad(lat2);\r\n\t\t\t\tvar a = radLat1 - radLat2;\r\n\t\t\t\tvar b = this.Rad(lng1) - this.Rad(lng2);\r\n\t\t\t\tvar s = 2 * Math.asin(Math.sqrt(Math.pow(Math.sin(a / 2), 2) + Math.cos(radLat1) * Math.cos(radLat2) * Math.pow(\r\n\t\t\t\t\tMath.sin(b / 2), 2)));\r\n\t\t\t\ts = s * 6378.137;\r\n\t\t\t\ts = Math.round(s * 10000) / 10000;\r\n\t\t\t\ts = s.toFixed(2) //保留两位小数\r\n\t\t\t\tconsole.log('经纬度计算的距离:' + s)\r\n\t\t\t\treturn s\r\n\r\n\t\t\t},\r\n\t\t\tcomputedDistance(address) {\r\n\t\t\t\tlet shopInfo = uni.getStorageSync(\"shopInfo\")\r\n\t\t\t\treturn this.getDistance(address.latitude, address.longitude, shopInfo.dgutshop_shop_latitude,\r\n\t\t\t\t\tshopInfo.dgutshop_shop_longitude)\r\n\t\t\t},\r\n\t\t\tgetDefaultAddress() {\r\n\t\t\t\tlet defaultAddress = uni.getStorageSync('defaultAddress')\r\n\t\t\t\tif (defaultAddress) {\r\n\t\t\t\t\treturn defaultAddress\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\turl: this.$apiUrl + '/wechat/address/list',\r\n\t\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t\"Authorization\": token\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\tfor (let i = 0; i < res.data.data.list.length; i++) {\r\n\t\t\t\t\t\t\t\tif (res.data.data.list[i].isDefault == '1' && computedDistance(res.data.data.list[i]) < 15) this.addAddressInOrder(\r\n\t\t\t\t\t\t\t\t\tres.data.data.list[i])\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tconsole.log('onshow')\r\n\t\t\tthis.order = uni.getStorageSync('settle_order')\r\n\t\t\tlet selectedAddress = uni.getStorageSync('selectedAddress')\r\n\t\t\tconsole.log(selectedAddress, 'selectedAddress')\r\n\t\t\tif (selectedAddress != null) {\r\n\t\t\t\tthis.address = selectedAddress\r\n\t\t\t\tthis.addAddressInOrder(selectedAddress)\r\n\t\t\t} else {\r\n\t\t\t\tthis.addAddressInOrder(uni.getStorageSync('defaultAddress'))\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: this.$apiUrl + '/wechat/address/list',\r\n\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\"Authorization\": token\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tfor (let i = 0; i < res.data.data.list.length; i++) {\r\n\t\t\t\t\t\t\tif (res.data.data.list[i].isDefault == '1') {\r\n\t\t\t\t\t\t\t\tthis.address=res.data.data.list[i]\r\n\t\t\t\t\t\t\t\tthis.addAddressInOrder(res.data.data.list[i])\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\r\n\t\t\tthis.shopInfo = uni.getStorageSync('shopInfo')\r\n\t\t\tthis.orderConfig = uni.getStorageSync(\"orderConfig\")\r\n\t\t\tconsole.log(\"orderPreview_orderConfig\", this.orderConfig)\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t// 获得购物车所有商品数量\r\n\t\t\tgetAllCount() {\r\n\t\t\t\tlet res = 0\r\n\t\t\t\tfor (let i = 0; i < this.order.orderItemList.length; i++) {\r\n\t\t\t\t\tres += this.order.orderItemList[i].sum\r\n\t\t\t\t}\r\n\t\t\t\treturn res\r\n\t\t\t},\r\n\t\t\tgetOrderTotalPrice() {\r\n\t\t\t\treturn this.order.orderPrice\r\n\t\t\t},\r\n\t\t\tgetAddressText() {\r\n\t\t\t\tif (this.order.consigneeAddress) {\r\n\t\t\t\t\treturn this.order.consigneeAddress + this.order.consigneeRoom\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn '点击选择收货地址'\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetNameAndPhone() {\r\n\t\t\t\tif (this.order.type) {\r\n\t\t\t\t\treturn ''\r\n\t\t\t\t} else if (this.order.consignee) {\r\n\t\t\t\t\treturn this.order.consignee + '' + this.order.consigneePhone\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn \"\"\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\tpage {\r\n\t\tbackground-color: #F7F7F7;\r\n\t}\r\n\r\n\t.header {\r\n\t\tpadding-left: 20px;\r\n\t\tpadding-right: 20px;\r\n\t\tpadding-top: 25px;\r\n\t\tpadding-bottom: 25px;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tbackground-color: #FFFFFF;\r\n\t\tmargin-bottom: 10px;\r\n\r\n\r\n\t\t.orderType {\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: row;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\twidth: 100%;\r\n\r\n\t\t\t.addressControl {\r\n\t\t\t\twidth: 70%;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: row;\r\n\t\t\t\tjustify-content: flex-start;\r\n\t\t\t\talign-items: center;\r\n\r\n\t\t\t\t.addressText {\r\n\t\t\t\t\tfont-size: 20px;\r\n\t\t\t\t\tfont-weight: 500;\r\n\t\t\t\t\tcolor: #000000;\r\n\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t\tword-break: break-all;\r\n\t\t\t\t\t/* break-all(允许在单词内换行。) */\r\n\t\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\t\t/* 超出部分省略号 */\r\n\t\t\t\t\tdisplay: -webkit-box;\r\n\t\t\t\t\t/** 对象作为伸缩盒子模型显示 **/\r\n\t\t\t\t\t-webkit-box-orient: vertical;\r\n\t\t\t\t\t/** 设置或检索伸缩盒对象的子元素的排列方式 **/\r\n\t\t\t\t\t-webkit-line-clamp: 1;\r\n\t\t\t\t\t/** 显示的行数 **/\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.icon {\r\n\t\t\t\t\twidth: 5%;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tflex-direction: row;\r\n\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.select {\r\n\t\t\t\twidth: 30%;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tfont-size: 25rpx;\r\n\t\t\t\twidth: 180rpx;\r\n\t\t\t\theight: 60rpx;\r\n\t\t\t\tborder-radius: 32rpx;\r\n\t\t\t\tbackground-color: #f6f6f6;\r\n\t\t\t}\r\n\r\n\t\t\t.select .on {\r\n\t\t\t\twidth: 90rpx;\r\n\t\t\t\theight: 60rpx;\r\n\t\t\t\tbackground-color: #343434;\r\n\t\t\t\tcolor: #ffffff;\r\n\t\t\t\tborder-radius: 32rpx;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\tline-height: 60rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.select .off {\r\n\t\t\t\twidth: 90rpx;\r\n\t\t\t\theight: 60rpx;\r\n\t\t\t\tcolor: #d2d2d2;\r\n\t\t\t\tborder-radius: 25rpx;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\tline-height: 60rpx;\r\n\t\t\t}\r\n\r\n\r\n\t\t}\r\n\r\n\r\n\t\t.nameAndPhone {\r\n\t\t\tcolor: #999999;\r\n\t\t\tfont-size: 13px;\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t.orderDetail {\r\n\t\tbackground-color: #FFFFFF;\r\n\t\tpadding-left: 20px;\r\n\t\tpadding-right: 20px;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\r\n\r\n\t\t.itemList {\r\n\t\t\tborder-bottom: #f0f0f0 solid 1rpx;\r\n\t\t\tpadding-bottom: 15px;\r\n\r\n\t\t\t.item {\r\n\t\t\t\tpadding-top: 10px;\r\n\t\t\t\tpadding-bottom: 10px;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: row;\r\n\t\t\t\tflex-wrap: nowrap;\r\n\t\t\t\tjustify-content: flex-start;\r\n\t\t\t\talign-items: flex-start;\r\n\t\t\t\talign-content: center;\r\n\r\n\t\t\t\t&>image {\r\n\t\t\t\t\twidth: 20%;\r\n\t\t\t\t\twidth: 140rpx;\r\n\t\t\t\t\theight: 140rpx;\r\n\t\t\t\t\tmargin-right: 16rpx;\r\n\t\t\t\t\tmargin-left: 2px;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.message {\r\n\t\t\t\t\twidth: 70%;\r\n\r\n\t\t\t\t\t.name {\r\n\t\t\t\t\t\tcolor: #000000;\r\n\t\t\t\t\t\tfont-size: 15px;\r\n\t\t\t\t\t\tfont-weight: 500;\r\n\t\t\t\t\t\tmargin-top: 10rpx;\r\n\t\t\t\t\t\tmargin-bottom: 10rpx;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.describe {\r\n\t\t\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\t\t\tcolor: #999;\r\n\t\t\t\t\t\t// overflow: hidden;\r\n\t\t\t\t\t\t// word-break: break-all;\r\n\t\t\t\t\t\t// /* break-all(允许在单词内换行。) */\r\n\t\t\t\t\t\t// text-overflow: ellipsis;\r\n\t\t\t\t\t\t// /* 超出部分省略号 */\r\n\t\t\t\t\t\t// display: -webkit-box;\r\n\t\t\t\t\t\t// /** 对象作为伸缩盒子模型显示 **/\r\n\t\t\t\t\t\t// -webkit-box-orient: vertical;\r\n\t\t\t\t\t\t// /** 设置或检索伸缩盒对象的子元素的排列方式 **/\r\n\t\t\t\t\t\t// -webkit-line-clamp: 2;\r\n\t\t\t\t\t\t// /** 显示的行数 **/\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.priceAndNum {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tflex-direction: column;\r\n\t\t\t\t\tjustify-content: flex-start;\r\n\t\t\t\t\talign-items: flex-end;\r\n\t\t\t\t\twidth: 20%;\r\n\r\n\t\t\t\t\t.price {\r\n\t\t\t\t\t\tfont-size: 16px;\r\n\t\t\t\t\t\tfont-weight: 400;\r\n\t\t\t\t\t\tcolor: #343434;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.num {\r\n\t\t\t\t\t\tmargin-top: 7px;\r\n\t\t\t\t\t\tfont-size: 13px;\r\n\t\t\t\t\t\tcolor: #999999;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.delivery {\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: row;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\talign-items: center;\r\n\t\t\tpadding-top: 10px;\r\n\t\t\tpadding-bottom: 10px;\r\n\t\t\tborder-bottom: #f0f0f0 solid 1rpx;\r\n\r\n\t\t\t.text {}\r\n\r\n\t\t\t.deliveryPrice {}\r\n\t\t}\r\n\r\n\t\t.mark {\r\n\t\t\tmargin-top: 25px;\r\n\t\t\tmargin-bottom: 25px;\r\n\r\n\r\n\t\t\t.text {\r\n\t\t\t\tcolor: #343434;\r\n\t\t\t\tmargin-bottom: 10px;\r\n\t\t\t}\r\n\r\n\t\t\t.input {}\r\n\r\n\t\t\t.input-holder {\r\n\t\t\t\tfont-weight: 500;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.totalText {\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: row;\r\n\t\t\tjustify-content: flex-end;\r\n\t\t\talign-items: center;\r\n\t\t\tfont-size: 15px;\r\n\t\t\tcolor: #343434;\r\n\t\t\tmargin-top: 25px;\r\n\t\t\tmargin-bottom: 25px;\r\n\r\n\t\t\t.total-price {\r\n\t\t\t\tcolor: #363636;\r\n\t\t\t\tfont-size: 20px;\r\n\t\t\t\tfont-weight: 500;\r\n\t\t\t\tmargin-left: 5px;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t}\r\n\r\n\r\n\t.bottom {\r\n\t\tmargin-bottom: var(--window-bottom);\r\n\t\tposition: fixed;\r\n\t\tbottom: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\theight: 54px;\r\n\t\tz-index: 99;\r\n\t\tdisplay: flex;\r\n\t\tbackground-color: #F0F0F1;\r\n\r\n\t\t.total-price {\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: row;\r\n\t\t\tjustify-content: flex-end;\r\n\t\t\talign-items: center;\r\n\t\t\tflex: 4;\r\n\t\t\tfont-size: 15px;\r\n\t\t\tfont-weight: 500;\r\n\t\t\tcolor: #363636;\r\n\r\n\r\n\t\t\t.price {\r\n\t\t\t\tcolor: #363636;\r\n\t\t\t\tfont-size: 20px;\r\n\t\t\t\tfont-weight: 500;\r\n\t\t\t\tmargin-right: 26px;\r\n\t\t\t\tmargin-left: 5px;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.BtnRight {\r\n\t\t\tflex: 2;\r\n\t\t\tbackground-color: #DBA871;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: center;\r\n\t\t\tfont-size: 17px;\r\n\t\t\tfont-weight: 500;\r\n\t\t\tcolor: #FFFFFF;\r\n\r\n\r\n\t\t\t.text {}\r\n\r\n\t\t}\r\n\t}\r\n</style>\n","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./orderPreview.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./orderPreview.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1610198163153\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}